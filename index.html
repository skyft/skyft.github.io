<!DOCTYPE html>
<html>
<head>
<title>3d</title>
        <link href='https:://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
        <link href='https:://fonts.googleapis.com/css?family=Nixie+One' rel='stylesheet' type='text/css'>
        <link href='https:://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css">
        <link href='coffee.css' rel='stylesheet' type='text/css'>
</head>
<body>
<div id="result_panel" class="result_contents">
	Loading results...
</div>

<div>
	<form method="post" id="download_form"> </form>
</div>

<footer id="footer"> </footer>

<script
  src="https://code.jquery.com/jquery-2.1.3.min.js"
  integrity="sha256-ivk71nXhz9nsyFDoYoGf2sbjrR9ddh+XDkCcfZxjvcM="
  crossorigin="anonymous"></script>
  
<script
  src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"
  integrity="sha256-xI/qyl9vpwWFOXz7+x/9WkG5j/SVnSw21viy8fWwbeE="
  crossorigin="anonymous"></script>
  
<script src="./modelist.js"></script>
<script src="jquery.form.js"></script>
<script src="utils.js"></script>
<script src="coffee.js"></script>


<script>

	function get_thing_link(thing_id) {
		return "http://www.thingiverse.com/thing:" + thing_id;
	}
	function get_file_link(file_id) {
		return "http://www.thingiverse.com/download:" + file_id;
	}
	function get_detail_link(file_id) {
		return "detail.html?file_id=" + file_id;
	}
	function get_rendering(file_id) {
		return "https://storage.googleapis.com/thingi10k/renderings/" + file_id + ".png"
	}

	function add_result(file_id) {
		$("#result_panel").append(
			"<a href=\"" + get_detail_link(file_id) + "\">"
			+ "<div class=\"result_item\"><p>" + "model " + file_id + "</p>"
			+ "<img src=\"" + get_rendering(file_id) + "\"/>"
			+ "</div></a>"
		);
	}

	function add_100_models(num_results) {
		var contents = "<h3>Query  returns " + num_results + " results. "
		+ "<div id=\"download_query_result\"> Download Script </div>"
		+ "</h3>";
		$("#result_panel").html(contents);
		for (var mi=0; mi<num_results; mi++){
			var file_id = modelistid[mi];
			add_result( file_id );
		}
	}
	
	$(document).ready(function() {
	$(".title").click(function() {
		window.location="/";
	});
	// load_footer();
	var url_vars = getUrlVars();
	$("#download_form").attr("action", get_api_uri() + "/download");
	// search_database(url_vars["q"]);
	add_100_models(100);
	});



// console.log( modelistid );
</script>


</body>
</html>
